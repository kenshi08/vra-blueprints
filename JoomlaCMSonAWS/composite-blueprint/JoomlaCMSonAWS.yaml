id: JoomlaCMSonAWS
name: Joomla CMS on AWS
description: 2 Tier Joomla on AWS
status: PUBLISHED
components:
  AWS-CentOS6-DB:
    type: Infrastructure.CatalogItem.Machine.Cloud.AmazonEC2
    data:
      _cluster:
        default: 1
        max: 1
        min: 1
      amazon_image:
        fixed:
          id: ami-b86a97c0
          label: ami-b86a97c0
      blueprint_type:
        fixed: '1'
      cpu:
        default: 1
        max: 1
        min: 1
      description: AWS DB-Tier on CentOS 6
      display_location:
        fixed: false
      ebs_storage: {}
      enable_amazon_network_options: false
      instance_type: t2.micro
      instance_types:
        fixed:
        - id: t2.micro
          label: t2 - Micro Instance
      key_pair: '0'
      memory:
        default: 1024
        max: 1024
        min: 1024
      osfamily:
        default: LINUX
        required: false
        secured: false
        visible: false
      provisioning_workflow:
        fixed:
          id: CloudProvisioningWorkflow
          label: CloudProvisioningWorkflow
      storage:
        fixed: 0
        max: 0
        min: 0
  AWS-CentOS6-Web:
    type: Infrastructure.CatalogItem.Machine.Cloud.AmazonEC2
    data:
      _cluster:
        default: 1
        max: 1
        min: 1
      amazon_image:
        fixed:
          id: ami-b86a97c0
          label: ami-b86a97c0
      blueprint_type:
        fixed: '1'
      cpu:
        default: 1
        max: 1
        min: 1
      description: AWS Web-Tier on CentOS 6
      display_location:
        fixed: false
      ebs_storage: {}
      enable_amazon_network_options: true
      instance_type: t2.micro
      instance_types:
        fixed:
        - id: t2.micro
          label: t2 - Micro Instance
      key_pair: '0'
      memory:
        default: 1024
        max: 1024
        min: 1024
      osfamily:
        default: LINUX
        required: false
        secured: false
        visible: false
      provisioning_workflow:
        fixed:
          id: CloudProvisioningWorkflow
          label: CloudProvisioningWorkflow
      storage:
        fixed: 0
        max: 0
        min: 0
  Apache_Services_1:
    type: Software.ApacheServices
    dependsOn:
    - Sysconfig-EC2_1
    data:
      host:
        fixed: ${_resource~AWS-CentOS6-Web}
  Joomla_Database_1:
    type: Software.JoomlaDatabase
    data:
      dbpassword:
        default: vmware
        required: true
        secured: false
      dbuser:
        default: root
        required: true
      host:
        fixed: ${_resource~MySQL_Database_1}
      joomla_db_name:
        default: joomla
        required: true
      joomla_db_user:
        default: joomlauser
        required: true
      joomla_db_user_pw:
        default: vmware
        required: true
  Joomla_Service_1:
    type: Software.JoomlaServices
    dependsOn:
    - Joomla_Database_1
    data:
      JOOMLAVERSION:
        default: 3.6.5
        required: true
      JOOMLA_DB_HOST:
        default: localhost
        editable: true
        required: true
        secured: false
      JOOMLA_DB_NAME:
        default: joomla
        required: true
      JOOMLA_DB_PASSWORD:
        default: vmware
        required: true
        secured: false
      JOOMLA_DB_USER:
        default: joomlauser
        required: true
      host:
        fixed: ${_resource~Apache_Services_1}
  MySQL_Database_1:
    type: Software.MySql
    dependsOn:
    - Sysconfig-EC2_2
    data:
      JAVA_HOME:
        default: /opt/vmware-jre
        required: true
      db_port:
        default: '3306'
        required: true
      db_root_password:
        default: vmware
        required: true
        secured: false
      db_root_username:
        default: root
        required: true
      global_ftp_proxy: {}
      global_http_proxy: {}
      global_https_proxy: {}
      host:
        fixed: ${_resource~AWS-CentOS6-DB}
      max_allowed_packet:
        default: 128M
        required: true
  PHP_Service_1:
    type: Software.PHPService
    dependsOn:
    - Apache_Services_1
    - Sysconfig-EC2_1
    data:
      host:
        fixed: ${_resource~AWS-CentOS6-Web}
  Sysconfig-EC2_1:
    type: Software.SysconfigEC2
    data:
      host:
        fixed: ${_resource~AWS-CentOS6-Web}
  Sysconfig-EC2_2:
    type: Software.SysconfigEC2
    data:
      host:
        fixed: ${_resource~AWS-CentOS6-DB}
layout:
  AWS-CentOS6-DB: 0,1
  AWS-CentOS6-Web: 0,0
  Apache_Services_1: 1,0
  Joomla_Database_1: 0,0
  Joomla_Service_1: 0,0
  MySQL_Database_1: 1,0
  PHP_Service_1: 2,0
  Sysconfig-EC2_1: 0,0
  Sysconfig-EC2_2: 0,0
